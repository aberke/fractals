<!doctype html>
<html>
<head>
	<title>Fractals</title>
    <meta name="author" content="Alex Berke | aberke">

    <!-- <meta name="description" content=""> TODO   -->
    <meta name="author" content="Alex Berke | aberke">
    <link rel="shortcut icon" href="img/sierpinski-triangle.png" type="image/x-icon">
    <meta property="og:image" content="img/sierpinski-triangle.png" />

    <script type="text/javascript" src="js/raphael/raphael.js"></script>
    
    <script type="text/javascript" src="js/util.js"></script>
    <script type="text/javascript" src="js/pythagoras-tree.js"></script>
    <script type="text/javascript" src="js/sierpinski-triangle.js"></script>
    <script type="text/javascript" src="js/sierpinski-arrowhead-curve.js"></script>
</head>
<body>

<h2>Pythagoras Tree</h2>
<div id="canvas-3" class="canvas" style="border: 1px solid blue;">
	<!-- Update the 'Order' number as the tree grows in animation -->
	<p>Order: <span class="order-text"></span></p>
	<button class="redraw-btn">Redraw</button>
</div>

<div id="canvas-4" class="canvas" style="border: 1px solid blue;">
	<!-- Update the 'Order' number as the tree grows in animation -->
	<p>Order: <span class="order-text"></span></p>
	<button class="redraw-btn">Redraw</button>
</div>

<div id="canvas-5" class="canvas" style="border: 1px solid blue;">
	<!-- Update the 'Order' number as the tree grows in animation -->
	<p>Order: <span class="order-text"></span></p>
	<button class="redraw-btn">Redraw</button>
</div>

<div id="canvas-6" class="canvas" style="border: 1px solid blue;">
	<!-- Update the 'Order' number as the tree grows in animation -->
	<p>Order: <span class="order-text"></span></p>
	<button class="redraw-btn">Redraw</button>
</div>

<h2>Sierpiński Triangle</h2>
<div id="canvas-1" class="canvas"></div>

<h2>Sierpiński Arrowhead Curve</h2>
<hr/>
<div id="canvas-2" class="canvas"></div>


<script>
"use strict";


function handlePythagoreasCanvas(containerId, edgePathFunction) {
	let containerElt = document.getElementById(containerId);
	let orderTextElt = containerElt.getElementsByClassName("order-text")[0];
	let redrawButtonElt = containerElt.getElementsByClassName("redraw-btn")[0];

	var paper = new Raphael(containerElt, "100%", 400);

	var pythagorasTreePathList = [];
	var centerPoint = {X: 300, Y: 350};
	var orientation = (-2)*RADIANS_45_DEGREES;
	var sideLength = 100;
	var pythagorasTreePathlist = pythagorasTreeRoutine(6, pythagorasTreePathList, centerPoint, orientation, sideLength, edgePathFunction);

	// Update inner text of this element as the order/level being drawn grows
	var currentDrawOrder = 0;
	function drawPythagorasTreeCallback(order) {
		if (currentDrawOrder < order) {
			currentDrawOrder = order;
			orderTextElt.innerText = String(order);
		}
	}
	// set up button for redrawing
	function redrawPythagorasTree() {
		paper.clear();
		drawPythagorasTree(paper, pythagorasTreePathList, 1000, drawPythagorasTreeCallback);
	}
	redrawButtonElt.onclick = redrawPythagorasTree;
	// draw the tree for the first time
	redrawPythagorasTree();
}

handlePythagoreasCanvas("canvas-3");
handlePythagoreasCanvas("canvas-4", getEllipsePath);
handlePythagoreasCanvas("canvas-5", getCurvedPath);
let multiplier = Math.random();
handlePythagoreasCanvas("canvas-6", function(fromPoint, toPoint, centerPoint) {
	return getCatmullRomPath(fromPoint, toPoint, centerPoint, multiplier);
});


// how many drawings in a row
const FRACTAL_ROW_COUNT = 5;

const CANVAS_HEIGHT = 400; // deal with mobile case later

var paper1 = new Raphael("canvas-1", "100%", CANVAS_HEIGHT);
var paper2 = new Raphael("canvas-2", "100%", CANVAS_HEIGHT);


let maxOrder = 6;
let baseFractalFunction = getSierpinskiTriangle;
let sierpinskiTriangleFractals = drawFractalRow(paper1, FRACTAL_ROW_COUNT, maxOrder, getSierpinskiTriangle, baseFractalFunction);

// draw the arrow head curves
let sierpinskiArrowheadCurveFractals = drawFractalRow(paper2, FRACTAL_ROW_COUNT, 4, getSierpinskiArrowheadCurve, baseFractalFunction);


</script>

</body>
